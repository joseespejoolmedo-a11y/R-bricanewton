:root{
  --bg:#0f1115; --card:#171a21; --ink:#e9eef7; --muted:#a9b2c3; --brand:#5aa9ff;
  --ok:#37c07a; --warn:#f2c94c; --bad:#ef6b6b;
  --ring:0 0 0 3px rgba(90,169,255,.35); --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,Noto Sans,sans-serif;
  color:var(--ink); background: radial-gradient(1200px 800px at 20% -10%, #1b2230 0%, #0f1115 60%);
}

.app{max-width:1200px;margin:24px auto;padding:20px}
.header{display:grid;gap:12px;margin-bottom:12px}
.header h1{margin:0;font-size:1.6rem;letter-spacing:.2px}
.meta{display:flex;flex-wrap:wrap;gap:16px;align-items:flex-end}
.stack{display:grid;gap:8px}
.stack.sm{min-width:220px}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
label{display:grid;gap:6px;font-size:.9rem;color:var(--muted)}

select, input[type="text"], input[type="date"], input[type="url"], textarea{
  background:var(--card);border:1px solid #2a3140;color:var(--ink);
  padding:10px 12px;border-radius:10px;outline:none;min-width:220px
}
textarea{min-height:80px;resize:vertical}
input:focus, select:focus, textarea:focus{box-shadow:var(--ring);border-color:transparent}

button{
  border:none;cursor:pointer;border-radius:10px;padding:10px 14px;
  background:var(--brand);color:#0b1220;font-weight:600;box-shadow: var(--shadow);
}
button.ghost{background:#263044;color:var(--ink);box-shadow:none;border:1px solid #334059}
button:focus-visible{outline:none;box-shadow:var(--ring)}
.muted{color:#a9b2c3;font-size:.9rem}

.table-wrap{
  background:linear-gradient(180deg,#131722,#10131b);
  border:1px solid #273147;border-radius:var(--radius);box-shadow:var(--shadow);
  padding:12px 12px 6px;overflow:auto
}
table{width:100%;border-collapse:separate;border-spacing:0}
thead th{
  position:sticky;top:0;background:#121723;z-index:1;
  padding:10px 8px;border-bottom:1px solid #2d384b;font-weight:700;text-align:center
}
tbody th{padding:10px;border-bottom:1px solid #222b3a;text-align:left;vertical-align:top}
td{padding:8px;border-bottom:1px solid #1f2735;text-align:center;vertical-align:top}

.score-col{min-width:180px}
.sel-col{min-width:170px}
.peso-col{min-width:90px}
.peso input{width:80px;text-align:center}

.hint{margin-left:8px;font-size:.95rem;padding:2px 8px;border-radius:999px;background:#263044;color:#c7d3ea}
.hint:hover{filter:brightness(1.1)}

.score{
  width:100%;max-width:200px;border-radius:12px;display:grid;
  grid-template-rows:auto auto 1fr;gap:2px;justify-items:center;
  background:#202636;color:#cfe1ff;font-size:1.05rem;font-weight:700;border:1px solid #2a3346;padding:10px 8px;
  min-height:120px
}
.score .n{line-height:1}
.score .lbl{font-size:.75rem;letter-spacing:.1px;opacity:.95}
.score .desc{
  font-size:.70rem;line-height:1.15;color:#d9e6ffcc;padding:0 6px;margin-top:4px;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;
}
.score:hover{filter:brightness(1.08)}
.score.active{background:var(--brand);color:#0b1220;border-color:transparent}
.score.active[data-score="4"]{background:var(--ok);color:#052215}
.score.active[data-score="2"]{background:var(--warn);color:#231b00}
.score.active[data-score="1"]{background:var(--bad);color:#260707}

.chosen{font-weight:700;color:#cfe1ff}
.chosen small{opacity:.85;font-weight:600}

.help{color:var(--muted);margin:10px 4px 0}

.results{
  display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;
  gap:12px;margin:16px 2px 8px
}
.kpi{display:flex;gap:12px;flex-wrap:wrap}
.kpi-item{background:var(--card);border:1px solid #2a3346;border-radius:12px;padding:12px 14px;min-width:150px;text-align:center}
.kpi-item span{display:block;color:var(--muted);font-size:.8rem}
.kpi-item strong{font-size:1.4rem;letter-spacing:.5px}

.actions{display:flex;gap:10px;flex-wrap:wrap}

.obs{margin:10px 2px}
.obs textarea{width:100%}

dialog{
  border:none;border-radius:16px;padding:0;max-width:900px;width:min(900px,calc(100% - 24px));
  color:#0f1115;box-shadow: var(--shadow);overflow:hidden
}
dialog::backdrop{background:rgba(0,0,0,.55)}
dialog form{background:#ffffff}
dialog h3{margin:0;padding:16px 18px;background:#f1f5fb;border-bottom:1px solid #e1e7f2}
.modal-body{padding:14px 18px;font-size:.95rem;line-height:1.45}
.rows-container{display:grid;gap:14px}
.rrow{border:1px solid #e5ecfb;border-radius:10px;padding:10px}
.rrow .grid-4{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:8px}
.rrow .top{display:flex;gap:8px;align-items:center;justify-content:space-between}
.rrow .title{flex:1}
.rrow .weight{width:110px}
.rrow .del{background:#ffe8e8;color:#8a1f1f;border:1px solid #ffd0d0}
.rrow input, .rrow textarea{background:#f9fbff;border:1px solid #dbe7ff;color:#0f1115}
.rrow textarea{min-height:50px}
dialog menu{display:flex;justify-content:flex-end;gap:8px;margin:0;padding:12px 14px;background:#f9fbff;border-top:1px solid #e8eef8}
dialog button{box-shadow:none}
.status{color:#111;background:#eef5ff;border:1px solid #d9e7ff;border-radius:8px;padding:6px 8px;margin-left:8px}

.import-controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin:8px 0}
.preview{margin-top:10px;max-height:260px;overflow:auto;border:1px solid #eaeef9;border-radius:10px;padding:10px;background:#fbfdff}
.preview table{width:100%;border-collapse:collapse}
.preview th, .preview td{border:1px solid #e8eef8;padding:6px 8px;text-align:left;font-size:.9rem}
.preview th{background:#f6f9ff}

.footer{margin-top:12px}
.footer small{color:#muted}
